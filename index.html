<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MySupporter | Official Release (Apply Form Fixed)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <script src="https://js.stripe.com/v3/"></script>

    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-functions.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&family=Noto+Sans+JP:wght@400;700;900&display=swap');
        body { font-family: 'Inter', 'Noto Sans JP', sans-serif; background-color: #060608; color: #ffffff; margin: 0; overflow-x: hidden; }
        .glass-panel { background: linear-gradient(145deg, rgba(255, 255, 255, 0.05) 0%, rgba(255, 255, 255, 0.01) 100%); backdrop-filter: blur(20px); border: 1px solid rgba(255, 255, 255, 0.08); }
        .campaign-card { transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .campaign-card:hover { border-color: rgba(249, 115, 22, 0.5); transform: translateY(-8px); }
        .progress-glow { box-shadow: 0 0 15px rgba(249, 115, 22, 0.6); background: linear-gradient(90deg, #f97316 0%, #fdba74 100%); }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .input-field { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 0.75rem; padding: 0.75rem; width: 100%; outline: none; color: white; transition: 0.3s; font-size: 16px; font-weight: bold; }
        .input-field:focus { border-color: #f97316; background: rgba(255,255,255,0.08); }
        .admin-tab { padding: 0.75rem; font-weight: 900; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 0.05em; transition: 0.3s; border-radius: 0.75rem; flex: 1; text-align: center; color: #64748b; white-space: nowrap; }
        .admin-tab.active { background: #f97316; color: white; }
        .modal-overlay { background: rgba(0,0,0,0.85); backdrop-filter: blur(10px); }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .secret-trigger { cursor: default; user-select: none; }
        .goal-stamp { animation: stamp 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards; opacity: 0; transform: scale(2) rotate(-15deg); }
        @keyframes stamp { to { opacity: 1; transform: scale(1) rotate(-15deg); } }
        .loading-spinner { border: 4px solid rgba(255, 255, 255, 0.3); border-radius: 50%; border-top: 4px solid #f97316; width: 30px; height: 30px; animation: spin 1s linear infinite; margin: 0 auto; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        // â–¼â–¼â–¼ Firebaseè¨­å®š (User ID: mysupporter-91816) â–¼â–¼â–¼
        const firebaseConfig = {
            apiKey: "AIzaSyBc6n-8U-8SNcM1CcP4r9sKweAhLcWajNc",
            authDomain: "mysupporter-91816.firebaseapp.com",
            projectId: "mysupporter-91816",
            storageBucket: "mysupporter-91816.firebasestorage.app",
            messagingSenderId: "184010562714",
            appId: "1:184010562714:web:fed9dbcf100b83a5c39323",
            measurementId: "G-E12NPFBT9H"
        };
        
        if (!firebase.apps.length) {
            firebase.initializeApp(firebaseConfig);
        }
        const db = firebase.firestore();
        const functions = firebase.functions();
        // â–²â–²â–²â–²â–²â–²

        // â–¼â–¼â–¼ Stripeè¨­å®š â–¼â–¼â–¼
        const stripePromise = window.Stripe ? window.Stripe('pk_test_XXXXXXXXXXXXXXXXXXXXXXXX') : null;
        // â–²â–²â–²â–²â–²â–²

        const { useState, useMemo, useEffect } = React;

        const LegalModal = ({ title, content, isOpen, onClose }) => {
            if (!isOpen) return null;
            return (
                <div className="fixed inset-0 z-[100] modal-overlay flex items-center justify-center p-4 fade-in" onClick={onClose}>
                    <div className="bg-[#111] border border-white/10 w-full max-w-4xl max-h-[85vh] rounded-[2rem] overflow-hidden flex flex-col shadow-2xl" onClick={e => e.stopPropagation()}>
                        <div className="p-6 md:p-8 border-b border-white/5 flex justify-between items-center shrink-0 bg-[#161616]">
                            <h2 className="text-lg md:text-xl font-black italic text-orange-500 uppercase tracking-tighter">{title}</h2>
                            <button onClick={onClose} className="text-slate-500 hover:text-white font-black text-xs tracking-widest transition-colors">CLOSE</button>
                        </div>
                        <div className="p-6 md:p-8 overflow-y-auto text-sm text-slate-300 leading-relaxed font-medium space-y-6 no-scrollbar bg-[#0a0a0a]">
                            {content}
                        </div>
                    </div>
                </div>
            );
        };

        const App = () => {
            const [isAdminMode, setIsAdminMode] = useState(false);
            const [view, setView] = useState('home'); 
            const [activeTab, setActiveTab] = useState('top'); 
            const [adminTab, setAdminTab] = useState('requests');
            const [searchQuery, setSearchQuery] = useState("");
            const [selectedCampaign, setSelectedCampaign] = useState(null);
            const [supportStep, setSupportStep] = useState(1);
            const [modal, setModal] = useState({ open: false, title: '', content: null });
            
            const [selectedAmount, setSelectedAmount] = useState(0); 
            const [customAmountInput, setCustomAmountInput] = useState(""); 
            const [supporterName, setSupporterName] = useState(""); 
            const [supporterAge, setSupporterAge] = useState(""); 
            const [supporterEmail, setSupporterEmail] = useState(""); 
            const [isProcessing, setIsProcessing] = useState(false);

            const [showLogin, setShowLogin] = useState(false);
            const [loginEmail, setLoginEmail] = useState("");
            const [loginPass, setLoginPass] = useState("");
            const [rakutenCodes, setRakutenCodes] = useState({});

            const [applyForm, setApplyForm] = useState(() => {
                const saved = localStorage.getItem("ms_applyForm");
                return saved ? JSON.parse(saved) : { 
                    team: "", email: "", itemUrl: "", teamUrl: "", snsUrl: "", description: "", image: null,
                    contactName: "", address: "", phone: ""
                };
            });
            const [reportForm, setReportForm] = useState(() => {
                const saved = localStorage.getItem("ms_reportForm");
                return saved ? JSON.parse(saved) : { team: "", title: "", content: "", image: null };
            });

            const [applyAgreed, setApplyAgreed] = useState(false);
            const [campaigns, setCampaigns] = useState([]);
            const [requests, setRequests] = useState([]);
            const [reports, setReports] = useState([]);

            const calcTarget = (price) => Math.floor((price + 500) * 1.1);

            useEffect(() => {
                const unsubC = db.collection("campaigns").onSnapshot(snap => setCampaigns(snap.docs.map(d => ({ id: d.id, ...d.data() }))));
                const unsubR = db.collection("requests").onSnapshot(snap => setRequests(snap.docs.map(d => ({ id: d.id, ...d.data() }))));
                const unsubRep = db.collection("reports").onSnapshot(snap => setReports(snap.docs.map(d => ({ id: d.id, ...d.data() }))));
                return () => { unsubC(); unsubR(); unsubRep(); };
            }, []);

            useEffect(() => {
                localStorage.setItem("ms_isAdmin", isAdminMode);
                if (!isAdminMode) setView('home'); 
            }, [isAdminMode]);

            useEffect(() => { localStorage.setItem("ms_applyForm", JSON.stringify(applyForm)); }, [applyForm]);
            useEffect(() => { localStorage.setItem("ms_reportForm", JSON.stringify(reportForm)); }, [reportForm]);

            const handleLocalUpdate = (id, field, value) => {
                setCampaigns(prev => prev.map(c => c.id === id ? { ...c, [field]: value } : c));
            };
            const saveToDB = async (id, field, value) => {
                try { await db.collection("campaigns").doc(id).update({ [field]: value }); } 
                catch(e) { console.error("Save failed", e); }
            };
            const handleRequestLocalUpdate = (id, field, value) => {
                setRequests(prev => prev.map(r => r.id === id ? { ...r, [field]: value } : r));
            };
            const saveRequestToDB = async (id, field, value) => {
                try { await db.collection("requests").doc(id).update({ [field]: value }); } 
                catch(e) { console.error("Save failed", e); }
            };

            const docContent = {
                terms: (
                    <div className="space-y-8">
                        <div><h3 className="text-white font-bold border-b border-white/20 pb-2 mb-4 text-lg">ç¬¬1æ¡ï¼ˆç·å‰‡ï¼‰</h3><p>æœ¬è¦ç´„ã¯ã€MySupporteré‹å–¶äº‹å‹™å±€ï¼ˆä»¥ä¸‹ã€Œç”²ã€ï¼‰ãŒæä¾›ã™ã‚‹ç‰©å“æ”¯æ´ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€ŒMySupporterã€ï¼ˆä»¥ä¸‹ã€Œæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã€ï¼‰ã®åˆ©ç”¨æ¡ä»¶ã‚’å®šã‚ã‚‹ã‚‚ã®ã§ã™ã€‚åˆ©ç”¨è€…ã¯æœ¬è¦ç´„ã«åŒæ„ã®ä¸Šã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã‚’åˆ©ç”¨ã™ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚</p></div>
                        <div><h3 className="text-white font-bold border-b border-white/20 pb-2 mb-4 text-lg">ç¬¬2æ¡ï¼ˆæ”¯æ´é‡‘ã®ä½¿é€”ã¨ä»•çµ„ã¿ï¼‰</h3><ul className="list-disc pl-5 space-y-2 text-slate-400"><li>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã¯ã€ã‚µãƒãƒ¼ã‚¿ãƒ¼ã‹ã‚‰ã®æ”¯æ´é‡‘ã‚’åŸè³‡ã¨ã—ã¦ã€ç”²ãŒãƒãƒ¼ãƒ ã®å¸Œæœ›ã™ã‚‹ç‰©å“ã‚’ä»£ç†è³¼å…¥ã—ã€é…é€ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚</li><li>æ”¯æ´é‡‘ã«ã¯ã€ç‰©å“ä»£é‡‘ã®ã»ã‹ã€ã‚·ã‚¹ãƒ†ãƒ åˆ©ç”¨æ–™ï¼ˆ10%ï¼‰ã€é…é€ãƒ»æ¢±åŒ…ç­‰ã®äº‹å‹™æ‰‹æ•°æ–™ï¼ˆä¸€å¾‹500å††ï¼‰ãŒå«ã¾ã‚Œã¾ã™ã€‚</li><li>ç›®æ¨™é‡‘é¡ã«åˆ°é”ã—ãŸæ™‚ç‚¹ã§æ±ºæ¸ˆãŒç¢ºå®šã—ã€ç‰©å“ã®æ‰‹é…ãŒè¡Œã‚ã‚Œã¾ã™ã€‚</li></ul></div>
                        <div><h3 className="text-white font-bold border-b border-white/20 pb-2 mb-4 text-lg text-orange-500">ç¬¬3æ¡ï¼ˆè¡¨æ˜ä¿è¨¼ãŠã‚ˆã³ç¦æ­¢äº‹é …ï¼‰</h3><p>æ²è¼‰ã‚’ç”³è«‹ã™ã‚‹ãƒãƒ¼ãƒ ä»£è¡¨è€…ã¯ã€ä»¥ä¸‹ã®äº‹é …ã‚’è¡¨æ˜ã—ä¿è¨¼ã—ã¾ã™ã€‚</p><ul className="list-disc pl-5 mt-2 space-y-2 text-slate-400"><li>å®Ÿåœ¨ã™ã‚‹å›£ä½“ã§ã‚ã‚Šã€å…·ä½“çš„ãªæ´»å‹•å®Ÿæ…‹ãŒã‚ã‚‹ã“ã¨ã€‚</li><li>ç”³è«‹å†…å®¹ï¼ˆãƒãƒ¼ãƒ åã€æ´»å‹•å†…å®¹ã€ç‰©å“ã®å¿…è¦æ€§ï¼‰ã«ä¸€åˆ‡ã®è™šå½ãŒãªã„ã“ã¨ã€‚</li><li>åç¤¾ä¼šçš„å‹¢åŠ›ï¼ˆæš´åŠ›å›£ã€æš´åŠ›å›£å“¡ã€ãã®ä»–ã“ã‚Œã«æº–ãšã‚‹è€…ï¼‰ã«è©²å½“ã—ãªã„ã“ã¨ã€‚</li></ul><p className="mt-2 text-red-400 font-bold">â€»è™šå½ã®ç”³è«‹ã«ã‚ˆã‚Šé‡‘éŠ­ã¾ãŸã¯ç‰©å“ã‚’å—é ˜ã—ãŸå ´åˆã€è©æ¬ºç½ªã¨ã—ã¦ã®åˆ‘äº‹å‘Šè¨´ãŠã‚ˆã³æå®³è³ å„Ÿè«‹æ±‚ã‚’è¡Œã„ã¾ã™ã€‚</p></div>
                        <div><h3 className="text-white font-bold border-b border-white/20 pb-2 mb-4 text-lg">ç¬¬4æ¡ï¼ˆè¿”é‡‘ãƒ»å…è²¬ï¼‰</h3><p>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®æ€§è³ªä¸Šï¼ˆå¯„ä»˜ãƒ»æ”¯æ´ï¼‰ã€åŸå‰‡ã¨ã—ã¦æ±ºæ¸ˆå®Œäº†å¾Œã®ã‚µãƒãƒ¼ã‚¿ãƒ¼éƒ½åˆã«ã‚ˆã‚‹è¿”é‡‘ãƒ»ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã¯å—ã‘ä»˜ã‘ã¾ã›ã‚“ã€‚ãŸã ã—ã€ãƒãƒ¼ãƒ ã®è§£æ•£ã‚„æ´»å‹•åœæ­¢ã«ã‚ˆã‚Šç‰©å“é€ä»˜ãŒä¸èƒ½ã¨ãªã£ãŸå ´åˆã¯ã€ç”²ã®åˆ¤æ–­ã«ã‚ˆã‚Šè¿”é‡‘ç­‰ã®æªç½®ã‚’è¬›ã˜ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p></div>
                    </div>
                ),
                privacy: (
                    <div className="space-y-8">
                        <div><h3 className="text-white font-bold border-b border-white/20 pb-2 mb-4 text-lg">1. å€‹äººæƒ…å ±ã®åé›†</h3><p>æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã§ã¯ã€æ±ºæ¸ˆå‡¦ç†ãŠã‚ˆã³å•†å“é…é€ã€æ´»å‹•å ±å‘Šã®ãŸã‚ã«ã€ä»¥ä¸‹ã®å€‹äººæƒ…å ±ã‚’å–å¾—ã—ã¾ã™ã€‚</p><ul className="list-disc pl-5 mt-2 text-slate-400"><li>æ°åã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€é›»è©±ç•ªå·ã€ä½æ‰€ï¼ˆé…é€å…ˆã®ã¿ï¼‰ã€ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±ï¼ˆæ±ºæ¸ˆä»£è¡Œæ¥­è€…ã®ã¿ãŒä¿æŒï¼‰</li></ul></div>
                        <div><h3 className="text-white font-bold border-b border-white/20 pb-2 mb-4 text-lg">2. å€‹äººæƒ…å ±ã®åˆ©ç”¨ç›®çš„</h3><p>å–å¾—ã—ãŸæƒ…å ±ã¯ã€ä»¥ä¸‹ã®ç›®çš„ä»¥å¤–ã«ã¯åˆ©ç”¨ã—ã¾ã›ã‚“ã€‚</p><ul className="list-disc pl-5 mt-2 text-slate-400"><li>æ”¯æ´ç‰©å“ã®è³¼å…¥ãŠã‚ˆã³é…é€æ¥­å‹™</li><li>æ±ºæ¸ˆæ‰‹ç¶šããŠã‚ˆã³é ˜åæ›¸ç­‰ã®ç™ºè¡Œ</li><li>ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ã™ã‚‹é‡è¦ãªãŠçŸ¥ã‚‰ã›ã€æ´»å‹•å ±å‘Šã®é€ä»˜</li></ul></div>
                        <div><h3 className="text-white font-bold border-b border-white/20 pb-2 mb-4 text-lg">3. ç¬¬ä¸‰è€…æä¾›</h3><p>æ³•ä»¤ã«åŸºã¥ãå ´åˆã‚’é™¤ãã€åˆ©ç”¨è€…ã®åŒæ„ãªãç¬¬ä¸‰è€…ã«å€‹äººæƒ…å ±ã‚’æä¾›ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãŸã ã—ã€æ”¯æ´å…ˆã®ãƒãƒ¼ãƒ ã«å¯¾ã—ã¦ã¯ã€æ”¯æ´è€…ãƒªã‚¹ãƒˆã¨ã—ã¦æ°åï¼ˆãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼‰ã®ã¿é–‹ç¤ºã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p></div>
                    </div>
                ),
                tokusho: (
                    <div className="space-y-6">
                        <table className="w-full text-left text-sm border-collapse"><tbody className="divide-y divide-white/10">
                            <tr><th className="py-4 text-white w-1/3">è²©å£²æ¥­è€…</th><td className="py-4 text-slate-300">MySupporter é‹å–¶äº‹å‹™å±€</td></tr>
                            <tr><th className="py-4 text-white">é‹å–¶çµ±æ‹¬è²¬ä»»è€…</th><td className="py-4 text-slate-300">èŒ‚ä½ é›„å¤ª</td></tr>
                            <tr><th className="py-4 text-white">æ‰€åœ¨åœ°</th><td className="py-4 text-slate-300">æ±äº¬éƒ½ä¸­é‡åŒºï¼ˆè«‹æ±‚ãŒã‚ã‚Šæ¬¡ç¬¬ã€é…æ»ãªãé–‹ç¤ºã—ã¾ã™ï¼‰</td></tr>
                            <tr><th className="py-4 text-white">é€£çµ¡å…ˆ</th><td className="py-4 text-orange-500">kanri@mycoach-myteam.com</td></tr>
                            <tr><th className="py-4 text-white">è²©å£²ä¾¡æ ¼</th><td className="py-4 text-slate-300">å„ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒšãƒ¼ã‚¸ã«è¨˜è¼‰ï¼ˆå•†å“ä»£é‡‘ï¼‹ã‚·ã‚¹ãƒ†ãƒ æ‰‹æ•°æ–™ï¼‹é€æ–™ï¼‰</td></tr>
                            <tr><th className="py-4 text-white">å•†å“ä»£é‡‘ä»¥å¤–ã®å¿…è¦æ–™é‡‘</th><td className="py-4 text-slate-300">ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶šæ–™é‡‘ã€é€šä¿¡æ–™é‡‘ç­‰</td></tr>
                            <tr><th className="py-4 text-white">æ”¯æ‰•æ–¹æ³•</th><td className="py-4 text-slate-300">ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æ±ºæ¸ˆï¼ˆStripeï¼‰</td></tr>
                            <tr><th className="py-4 text-white">å•†å“ã®å¼•æ¸¡æ™‚æœŸ</th><td className="py-4 text-slate-300">ç›®æ¨™é‡‘é¡é”æˆå¾Œã€Amazon/æ¥½å¤©ç­‰ã®åœ¨åº«çŠ¶æ³ã«æº–ã˜ã¦7å–¶æ¥­æ—¥ä»¥å†…ã«ç™ºé€æ‰‹é…</td></tr>
                            <tr><th className="py-4 text-white">ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒ»è¿”å“</th><td className="py-4 text-slate-300">æ”¯æ´ã¨ã„ã†æ€§è³ªä¸Šã€åŸå‰‡ã¨ã—ã¦ãŠå—ã‘ã§ãã¾ã›ã‚“ã€‚</td></tr>
                        </tbody></table>
                    </div>
                )
            };

            const handleImageUpload = (e, callback) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onloadend = () => callback(reader.result);
                    reader.readAsDataURL(file);
                }
            };

            const extractImageFromCode = (code) => {
                if (!code || typeof code !== 'string') return null;
                try {
                    const div = document.createElement('div');
                    div.innerHTML = code;
                    const img = div.querySelector('img');
                    if (img && img.src) return img.src;
                } catch (e) {
                    console.error("Parse error", e);
                }
                const match = code.match(/<img[^>]+src=["']([^"']+)["']/i);
                return match ? match[1] : null;
            };

            const stats = useMemo(() => {
                const totalPayment = campaigns.reduce((acc, c) => acc + c.current, 0);
                const transactionCount = campaigns.reduce((acc, c) => acc + (c.supporters || 0), 0);
                const completedCount = campaigns.filter(c => c.current >= calcTarget(c.price) || c.status === 'completed' || c.status === 'ordered').length;
                return { 
                    totalPayment, 
                    transactionCount, 
                    stripeFee: Math.floor(totalPayment * 0.036), 
                    adminFee: Math.floor(totalPayment * 0.064), 
                    shipping: completedCount * 500 
                };
            }, [campaigns]);

            const handleLogin = () => {
                if (loginEmail === "y.moz.fleet@gmail.com" && loginPass === "Rushers1#") { setIsAdminMode(true); setView('admin'); setShowLogin(false); } else { alert("èªè¨¼ã‚¨ãƒ©ãƒ¼"); }
            };
            const handleLogout = () => {
                setIsAdminMode(false);
                setView('home');
                setLoginEmail("");
                setLoginPass("");
            };
            const handleCustomAmountChange = (e) => {
                setCustomAmountInput(e.target.value);
                setSelectedAmount(parseInt(e.target.value) || 0);
            };
            const shareText = (c) => encodeURIComponent(`ã€MySupporterã€‘${c.team}ã®ã€Œ${c.name}ã€ã‚’å¿œæ´ã—ã‚ˆã†ï¼`);
            const shareUrl = "https://mysupporter.example.com";
            const copyToClipboard = () => navigator.clipboard.writeText(shareUrl).then(() => alert("ãƒªãƒ³ã‚¯ã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã—ãŸ"));

            const filteredCampaigns = useMemo(() => {
                return campaigns.filter(c => {
                    const match = !searchQuery || c.team.toLowerCase().includes(searchQuery.toLowerCase()) || c.name.toLowerCase().includes(searchQuery.toLowerCase());
                    return match && (c.status === 'active' || c.status === 'completed');
                }).sort((a,b) => (a.current >= calcTarget(a.price) ? 1 : -1) || (b.supporters - a.supporters));
            }, [campaigns, searchQuery]);

            const submitRequest = async () => {
                if(!applyForm.team || !applyForm.email || !applyForm.contactName || !applyForm.address || !applyForm.phone) return alert("å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
                if(!applyAgreed) return alert("è¦ç´„ã¸ã®åŒæ„ãŒå¿…è¦ã§ã™");
                
                await db.collection("requests").add({ 
                    team: applyForm.team,
                    email: applyForm.email,
                    itemUrl: applyForm.itemUrl, 
                    teamUrl: applyForm.teamUrl,
                    snsUrl: applyForm.snsUrl,
                    description: applyForm.description,
                    image: applyForm.image,
                    estimatedPrice: 0, 
                    status: "pending", 
                    date: new Date().toLocaleDateString('ja-JP') 
                });

                const subject = encodeURIComponent("ã€æ²è¼‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€‘ç™ºé€å…ˆæƒ…å ±é€ä»˜");
                const body = encodeURIComponent(
                    `ä»¥ä¸‹ã®å†…å®¹ã§æ²è¼‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ç”³è«‹ã—ã¾ã—ãŸã€‚\n\n` +
                    `â– ãƒãƒ¼ãƒ å: ${applyForm.team}\n` +
                    `â– ãŠåå‰: ${applyForm.contactName}\n` +
                    `â– ä½æ‰€: ${applyForm.address}\n` +
                    `â– é›»è©±ç•ªå·: ${applyForm.phone}\n` +
                    `â– å•†å“URL: ${applyForm.itemUrl}\n\n` +
                    `--------------------------------------------------\n` +
                    `ã“ã®ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¦ç”³è«‹ã‚’å®Œäº†ã•ã›ã¦ãã ã•ã„ã€‚`
                );
                
                alert("ãƒªã‚¯ã‚¨ã‚¹ãƒˆå†…å®¹ã‚’ä¿å­˜ã—ã¾ã—ãŸã€‚\nç¶šã‘ã¦ãƒ¡ãƒ¼ãƒ©ãƒ¼ãŒèµ·å‹•ã—ã¾ã™ã®ã§ã€ç™ºé€å…ˆæƒ…å ±ã‚’é€ä¿¡ã—ã¦ãã ã•ã„ã€‚");
                window.location.href = `mailto:y.moz.fleet@gmail.com?subject=${subject}&body=${body}`;

                localStorage.removeItem("ms_applyForm");
                setApplyForm({ team: "", email: "", itemUrl: "", teamUrl: "", snsUrl: "", description: "", image: null, contactName: "", address: "", phone: "" });
                setView('home');
            };
            
            const approveRequest = async (req) => {
                if(!req.estimatedPrice) return alert("é‡‘é¡ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„");
                const productName = req.name || "æ–°è¦å‹Ÿé›†å•†å“ (ç·¨é›†ã—ã¦ãã ã•ã„)";
                await db.collection("campaigns").add({ 
                    ...req, 
                    name: productName,
                    price: req.estimatedPrice, 
                    current: 0, 
                    supporters: 0, 
                    status: 'active', 
                    month: new Date().toISOString().slice(0, 7) 
                });
                await db.collection("requests").doc(req.id).delete();
                alert("æ‰¿èªå®Œäº†");
            };

            const handlePayment = async () => {
                if (!stripePromise) { alert("StripeãŒåˆæœŸåŒ–ã•ã‚Œã¦ã„ã¾ã›ã‚“"); return; }
                setIsProcessing(true);

                try {
                    const createSession = functions.httpsCallable('createCheckoutSession');
                    const response = await createSession({
                        amount: selectedAmount,
                        name: supporterName || "åŒ¿åã‚µãƒãƒ¼ã‚¿ãƒ¼",
                        email: supporterEmail
                    });

                    const stripe = await stripePromise;
                    const { error } = await stripe.redirectToCheckout({
                        sessionId: response.data.id
                    });

                    if (error) {
                        alert("æ±ºæ¸ˆã‚¨ãƒ©ãƒ¼: " + error.message);
                    }
                } catch (error) {
                    console.error(error);
                    alert("ã€Stripeæ±ºæ¸ˆé€£æºã‚¨ãƒ©ãƒ¼ã€‘\nã‚µãƒ¼ãƒãƒ¼(Cloud Functions)ã®è¨­å®šã¾ãŸã¯é€šä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚\n\nâ€»ãƒ‡ãƒ¢ã¨ã—ã¦å®Œäº†å‡¦ç†ã®ã¿è¡Œã„ã¾ã™ã€‚");
                    await completeSupport();
                } finally {
                    setIsProcessing(false);
                }
            };

            const completeSupport = async () => {
                const newCur = selectedCampaign.current + selectedAmount;
                const target = calcTarget(selectedCampaign.price);
                await db.collection("campaigns").doc(selectedCampaign.id).update({
                    current: newCur, supporters: (selectedCampaign.supporters||0)+1, status: newCur >= target ? 'completed' : selectedCampaign.status
                });
                alert("æ±ºæ¸ˆãŒå®Œäº†ã—ã¾ã—ãŸã€‚ã”æ”¯æ´ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼");
                
                setSelectedAmount(0);
                setSupporterName("");
                setSupporterAge("");
                setSupporterEmail("");
                setView('home');
            };

            const submitReport = async () => {
                if(!reportForm.team || !reportForm.content) return alert("å…¥åŠ›ã—ã¦ãã ã•ã„");
                await db.collection("reports").add({ ...reportForm, date: new Date().toLocaleDateString('ja-JP') });
                localStorage.removeItem("ms_reportForm");
                setReportForm({ team: "", title: "", content: "", image: null });
                alert("å…¬é–‹ã—ã¾ã—ãŸ"); 
            };
            const updateOrderStatus = async (c, s) => {
                if(confirm("ç™ºæ³¨å®Œäº†ã¨ã—ã¦å‡¦ç†ã—ã€å®Œäº†ãƒ¡ãƒ¼ãƒ«ã®ä¸‹æ›¸ãã‚’ä½œæˆã—ã¾ã™ã‹ï¼Ÿ")) {
                    await db.collection("campaigns").doc(c.id).update({ status: s });
                    const subject = encodeURIComponent("ã€MySupporterã€‘æ”¯æ´ç‰©è³‡ã®ç™ºæ³¨æ‰‹ç¶šãå®Œäº†ã®ãŠçŸ¥ã‚‰ã›");
                    const body = encodeURIComponent(`${c.team} ä»£è¡¨è€…æ§˜\n\nMySupporteré‹å–¶äº‹å‹™å±€ã§ã™ã€‚\n\nãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€Œ${c.name}ã€ãŒç›®æ¨™é‡‘é¡ã‚’é”æˆã„ãŸã—ã¾ã—ãŸã®ã§ã€\næœ¬æ—¥ã€ã”æŒ‡å®šã®å•†å“ï¼ˆ${c.itemUrl}ï¼‰ã®ç™ºæ³¨æ‰‹ç¶šãã‚’å®Œäº†ã„ãŸã—ã¾ã—ãŸã€‚\n\nå•†å“ã®åˆ°ç€ã¾ã§ä»Šã—ã°ã‚‰ããŠå¾…ã¡ãã ã•ã„ã€‚\n\nä»Šå¾Œã¨ã‚‚MySupporterã‚’ã‚ˆã‚ã—ããŠé¡˜ã„ã„ãŸã—ã¾ã™ã€‚\n\n--------------------------------------------------\nMySupporter é‹å–¶äº‹å‹™å±€\nEmail: kanri@mycoach-myteam.com\n--------------------------------------------------`);
                    window.location.href = `mailto:${c.email}?subject=${subject}&body=${body}`;
                }
            };
            const deleteDoc = async (col, id) => { if(confirm("å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ")) await db.collection(col).doc(id).delete(); };

            return (
                <div className="min-h-screen flex flex-col relative">
                    <LegalModal isOpen={modal.open} title={modal.title} content={modal.content} onClose={() => setModal({open: false, title: '', content: null})} />
                    
                    {showLogin && (
                        <div className="fixed inset-0 z-[100] bg-black/90 backdrop-blur-md flex items-center justify-center fade-in">
                            <div className="glass-panel p-6 md:p-10 rounded-[2rem] w-full max-w-md border border-orange-500/30 shadow-2xl space-y-6 m-4">
                                <h3 className="text-2xl font-black italic uppercase text-white text-center">Admin Access</h3>
                                <input className="input-field" placeholder="Email" value={loginEmail} onChange={e=>setLoginEmail(e.target.value)} />
                                <input type="password" className="input-field" placeholder="Code" value={loginPass} onChange={e=>setLoginPass(e.target.value)} />
                                <button onClick={handleLogin} className="w-full py-4 bg-orange-600 rounded-xl font-black italic">LOGIN</button>
                                <button onClick={()=>setShowLogin(false)} className="w-full text-xs text-slate-500 font-bold">CANCEL</button>
                            </div>
                        </div>
                    )}

                    <nav className="h-20 md:h-24 flex items-center justify-between px-4 md:px-12 sticky top-0 bg-[#060608]/95 backdrop-blur-xl z-50 border-b border-white/5 gap-4 md:gap-8">
                        <div className="flex items-center gap-2 md:gap-3 cursor-pointer shrink-0" onClick={() => {setView('home'); setActiveTab('top'); setIsAdminMode(false);}}>
                            <div className="bg-orange-600 w-8 h-8 md:w-10 md:h-10 rounded-xl flex items-center justify-center italic font-black text-white shadow-lg text-lg md:text-xl">S</div>
                            <span className="font-black text-xl md:text-2xl tracking-tighter uppercase italic text-white">MySupporter</span>
                        </div>
                        {!isAdminMode && (
                            <div className="hidden md:block flex-1 max-w-xl relative border border-white/10 bg-white/5 rounded-2xl transition-all overflow-hidden focus-within:border-orange-500">
                                <input type="text" placeholder="å­¦æ ¡åã‚„å•†å“ã§æ¤œç´¢..." value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} className="w-full bg-transparent py-3 px-12 outline-none text-sm font-bold" />
                                <div className="absolute left-4 top-1/2 -translate-y-1/2 text-slate-500">ğŸ”</div>
                            </div>
                        )}
                        <div className="hidden lg:flex bg-white/5 p-1 rounded-full border border-white/10">
                            {['campaigns', 'about', 'howitworks', 'thanks'].map(tab => (
                                <button key={tab} onClick={() => {setView('home'); setActiveTab(tab);}} className={`px-6 py-2 rounded-full text-[10px] font-black uppercase tracking-widest transition-all ${activeTab === tab ? 'bg-orange-600 text-white shadow-lg' : 'text-slate-400 hover:text-white'}`}>
                                    {tab === 'about' ? 'MySUPPORTERã¨ã¯' : tab === 'campaigns' ? 'æ”¯æ´å‹Ÿé›†' : tab === 'howitworks' ? 'ã”åˆ©ç”¨ãƒ•ãƒ­ãƒ¼' : 'æ´»å‹•å ±å‘Š'}
                                </button>
                            ))}
                        </div>
                        <div className="flex gap-2 md:gap-4">
                            {!isAdminMode && <button onClick={()=>setView('apply')} className="text-[10px] font-black uppercase border border-white/20 px-4 md:px-6 py-2 rounded-full hover:bg-white hover:text-black transition">æ²è¼‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</button>}
                            {isAdminMode && <button onClick={handleLogout} className="text-[10px] font-black bg-red-600 text-white px-4 md:px-6 py-2 rounded-full">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>}
                        </div>
                    </nav>

                    {/* ã‚¹ãƒãƒ›ç”¨ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ */}
                    {!isAdminMode && view === 'home' && (
                        <div className="md:hidden sticky top-20 z-40 bg-[#060608]/95 border-b border-white/5 backdrop-blur-xl overflow-x-auto no-scrollbar">
                            <div className="flex px-4 py-3 gap-3 min-w-max">
                                {['campaigns', 'about', 'howitworks', 'thanks'].map(tab => (
                                    <button key={tab} onClick={() => {setView('home'); setActiveTab(tab); window.scrollTo({ top: 0, behavior: 'smooth' });}} 
                                        className={`px-4 py-2 rounded-full text-[10px] font-bold uppercase tracking-widest transition-all whitespace-nowrap 
                                        ${activeTab === tab ? 'bg-orange-600 text-white shadow-lg' : 'bg-white/5 text-slate-400 border border-white/10'}`}>
                                        {tab === 'about' ? 'MySUPPORTERã¨ã¯' : tab === 'campaigns' ? 'æ”¯æ´å‹Ÿé›†' : tab === 'howitworks' ? 'ã”åˆ©ç”¨ãƒ•ãƒ­ãƒ¼' : 'æ´»å‹•å ±å‘Š'}
                                    </button>
                                ))}
                            </div>
                        </div>
                    )}

                    <main className="flex-grow">
                        {view === 'admin' && isAdminMode ? (
                            <div className="max-w-7xl mx-auto p-4 md:p-12 fade-in">
                                <div className="flex justify-between items-end border-b border-white/10 pb-4 md:pb-8 mb-8">
                                    <h2 className="text-2xl md:text-4xl font-black italic text-orange-500 uppercase tracking-tighter">ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h2>
                                </div>
                                <div className="flex bg-white/5 p-1 rounded-2xl border border-white/10 mb-8 gap-2 overflow-x-auto">
                                    {['requests', 'campaigns', 'orders', 'reports', 'revenue'].map(t => (
                                        <button key={t} onClick={()=>setAdminTab(t)} className={`admin-tab ${adminTab===t ? 'active' : 'text-slate-500'}`}>{t==='requests'?'ãƒªã‚¯ã‚¨ã‚¹ãƒˆç®¡ç†':t==='campaigns'?'å‹Ÿé›†ç·¨é›†':t==='orders'?'ç™ºæ³¨ç®¡ç†':t==='reports'?'æ´»å‹•å ±å‘Šä½œæˆ':'åç›Šç®¡ç†'}</button>
                                    ))}
                                </div>

                                {adminTab === 'requests' && <div className="grid gap-6">{requests.map(req => (
                                    <div key={req.id} className="glass-panel p-6 md:p-8 rounded-[2rem] grid grid-cols-1 md:grid-cols-3 gap-8 border-l-8 border-orange-600">
                                        <div className="space-y-4">
                                            <div className="aspect-video bg-white/5 rounded-2xl overflow-hidden flex items-center justify-center relative">{req.image ? <img src={req.image} className="w-full h-full object-cover"/> : "No Image"}</div>
                                            <div className="space-y-2">
                                                <textarea className="input-field text-xs h-12" placeholder="æ¥½å¤©ã‚³ãƒ¼ãƒ‰" value={rakutenCodes[req.id]||""} onChange={e=>setRakutenCodes({...rakutenCodes,[req.id]:e.target.value})}/>
                                                <button className="w-full py-2 bg-white/10 rounded-lg text-xs font-bold" onClick={()=>{
                                                    const src=extractImageFromCode(rakutenCodes[req.id]);
                                                    if(src) {
                                                        setRequests(requests.map(r=>r.id===req.id?{...r,image:src}:r));
                                                        saveRequestToDB(req.id, 'image', src);
                                                    } else {
                                                        alert("ç”»åƒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ã‚³ãƒ¼ãƒ‰ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚");
                                                    }
                                                }}>ç”»åƒé©ç”¨</button>
                                            </div>
                                            <a href={req.itemUrl} target="_blank" className="text-xs text-orange-500 underline block text-center">å•†å“URL</a>
                                        </div>
                                        <div className="md:col-span-2 space-y-4">
                                            <h3 className="text-2xl font-black">{req.team}</h3>
                                            <div className="grid grid-cols-2 gap-4 text-xs text-blue-400">
                                                <a href={req.teamUrl} target="_blank">HP: {req.teamUrl||"ãªã—"}</a>
                                                <a href={req.snsUrl} target="_blank">SNS: {req.snsUrl||"ãªã—"}</a>
                                            </div>
                                            <div>
                                                <label className="text-[10px] font-bold text-slate-500">å•†å“å (æ‰¿èªå¾Œè¡¨ç¤º)</label>
                                                <input className="input-field text-sm" placeholder="å•†å“åã‚’å…¥åŠ› (ä¾‹: å…¬å¼è©¦åˆçƒ)" value={req.name||''} onChange={e => handleRequestLocalUpdate(req.id, 'name', e.target.value)} onBlur={e => saveRequestToDB(req.id, 'name', e.target.value)} />
                                            </div>
                                            <div className="bg-white/5 p-4 rounded-xl"><label className="text-[10px] font-bold text-orange-500">æ‰¿èªé‡‘é¡</label>
                                                <input type="number" className="input-field text-xl" value={req.estimatedPrice||''} onChange={e => handleRequestLocalUpdate(req.id, 'estimatedPrice', parseInt(e.target.value))} onBlur={e => saveRequestToDB(req.id, 'estimatedPrice', parseInt(e.target.value))} />
                                            </div>
                                            <div>
                                                <label className="text-[10px] font-bold text-slate-500">ãƒªã‚¯ã‚¨ã‚¹ãƒˆç†ç”±</label>
                                                <textarea className="input-field text-sm h-20" value={req.description||''} onChange={e => handleRequestLocalUpdate(req.id, 'description', e.target.value)} onBlur={e => saveRequestToDB(req.id, 'description', e.target.value)}></textarea>
                                            </div>
                                            <div className="flex gap-4"><button onClick={()=>approveRequest(req)} className="flex-1 bg-orange-600 py-3 rounded-xl font-black text-xs">æ‰¿èª</button><button onClick={()=>deleteDoc("requests", req.id)} className="px-8 border border-white/10 rounded-xl font-black text-xs hover:bg-red-600">å‰Šé™¤</button></div>
                                        </div>
                                    </div>
                                ))}</div>}

                                {adminTab === 'campaigns' && <div className="grid gap-4">{campaigns.map(c => (
                                    <div key={c.id} className="glass-panel p-6 rounded-3xl flex flex-col md:flex-row gap-6 items-center">
                                        <div className="w-full md:w-32 shrink-0 space-y-2">
                                            <div className="w-full h-32 bg-white rounded-2xl overflow-hidden"><img src={c.image} className="w-full h-full object-contain"/></div>
                                            <input className="input-field py-1 px-2 text-[10px] w-full" placeholder="æ¥½å¤©ã‚³ãƒ¼ãƒ‰" value={rakutenCodes[c.id]||""} onChange={e=>setRakutenCodes({...rakutenCodes,[c.id]:e.target.value})}/><button className="w-full py-2 bg-white/10 rounded-lg text-xs font-bold" onClick={()=>{const src=extractImageFromCode(rakutenCodes[c.id]);if(src)saveToDB(c.id, 'image', src); else alert("ç”»åƒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“")}}>ç”»åƒæŠ½å‡º</button>
                                        </div>
                                        <div className="flex-grow space-y-4 w-full">
                                            <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
                                                <div><label className="text-[10px] text-slate-500 font-bold">ãƒãƒ¼ãƒ å</label><input className="input-field py-1 px-2 text-xs" value={c.team} onChange={e=>handleLocalUpdate(c.id, 'team', e.target.value)} onBlur={e=>saveToDB(c.id, 'team', e.target.value)} /></div>
                                                <div><label className="text-[10px] text-slate-500 font-bold">å•†å“å</label><input className="input-field py-1 px-2 text-xs" value={c.name} onChange={e=>handleLocalUpdate(c.id, 'name', e.target.value)} onBlur={e=>saveToDB(c.id, 'name', e.target.value)} /></div>
                                                <div><label className="text-[10px] text-slate-500 font-bold">ä¾¡æ ¼</label><input type="number" className="input-field py-1 px-2 text-xs" value={c.price} onChange={e=>handleLocalUpdate(c.id, 'price', parseInt(e.target.value))} onBlur={e=>saveToDB(c.id, 'price', parseInt(e.target.value))} /></div>
                                                <div><label className="text-[10px] text-slate-500 font-bold">URL</label><input className="input-field py-1 px-2 text-[10px]" value={c.teamUrl||""} onChange={e=>handleLocalUpdate(c.id, 'teamUrl', e.target.value)} onBlur={e=>saveToDB(c.id, 'teamUrl', e.target.value)} /></div>
                                            </div>
                                            <div>
                                                <label className="text-[10px] text-slate-500 font-bold">èª¬æ˜æ–‡</label>
                                                <textarea className="input-field py-2 px-2 text-xs h-16" value={c.description||''} onChange={e=>handleLocalUpdate(c.id, 'description', e.target.value)} onBlur={e=>saveToDB(c.id, 'description', e.target.value)}></textarea>
                                            </div>
                                        </div>
                                        <button onClick={()=>deleteDoc("campaigns", c.id)} className="text-xs font-black border border-white/10 px-4 py-2 rounded-lg hover:bg-red-600">å‰Šé™¤</button>
                                    </div>
                                ))}</div>}

                                {adminTab === 'orders' && <div className="space-y-6">{campaigns.filter(c => c.current >= calcTarget(c.price) && c.status !== 'ordered').map(c => (
                                    <div key={c.id} className="glass-panel p-6 md:p-8 rounded-[2rem] flex flex-col md:flex-row items-center gap-8 border-l-8 border-green-500">
                                        <div className="flex-grow w-full"><span className="bg-green-500 text-black text-[10px] font-black px-2 py-1 rounded">é”æˆæ¸ˆã¿</span><h3 className="text-xl font-black italic mt-2">{c.team} - {c.name}</h3><div className="flex gap-4 text-xs text-slate-400 mt-2"><a href={c.itemUrl} target="_blank" className="underline">å•†å“ãƒšãƒ¼ã‚¸</a><span>é€£çµ¡å…ˆ: {c.email}</span></div></div>
                                        <button onClick={()=>updateOrderStatus(c, 'ordered')} className="w-full md:w-auto px-6 py-3 bg-green-500 text-black rounded-xl text-xs font-black">ç™ºæ³¨å®Œäº†</button>
                                    </div>
                                ))}</div>}

                                {adminTab === 'reports' && (
                                    <div className="space-y-8">
                                        <div className="glass-panel p-6 md:p-10 rounded-[3rem] border border-orange-500/20">
                                            <h3 className="text-lg font-black italic mb-8 uppercase">æ´»å‹•å ±å‘Šä½œæˆ</h3>
                                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8">
                                                <div className="space-y-4">
                                                    <input className="input-field" placeholder="å¯¾è±¡ãƒãƒ¼ãƒ å" value={reportForm.team} onChange={e=>setReportForm({...reportForm, team: e.target.value})} />
                                                    <input className="input-field" placeholder="ã‚¿ã‚¤ãƒˆãƒ«" value={reportForm.title} onChange={e=>setReportForm({...reportForm, title: e.target.value})} />
                                                    <div className="h-40 border-2 border-dashed border-white/10 rounded-2xl flex items-center justify-center relative">{reportForm.image ? <img src={reportForm.image} className="w-full h-full object-cover rounded-xl"/> : "Image"}<input type="file" className="absolute inset-0 opacity-0 cursor-pointer" onChange={e=>handleImageUpload(e, r=>setReportForm({...reportForm, image: r}))} /></div>
                                                </div>
                                                <textarea className="input-field h-full min-h-[200px]" placeholder="æœ¬æ–‡" value={reportForm.content} onChange={e=>setReportForm({...reportForm, content: e.target.value})}></textarea>
                                            </div>
                                            <button onClick={submitReport} className="w-full mt-8 bg-white text-black py-4 rounded-2xl font-black">å…¬é–‹ã™ã‚‹</button>
                                        </div>

                                        <div className="glass-panel p-6 md:p-10 rounded-[3rem]">
                                            <h3 className="text-lg font-black italic mb-8 uppercase">æŠ•ç¨¿æ¸ˆã¿ãƒ¬ãƒãƒ¼ãƒˆç®¡ç†</h3>
                                            <div className="space-y-4">
                                                {reports.map(r => (
                                                    <div key={r.id} className="flex items-center gap-4 bg-white/5 p-4 rounded-xl border border-white/10">
                                                        <img src={r.image} className="w-16 h-16 rounded-lg object-cover" />
                                                        <div className="flex-1">
                                                            <h4 className="font-bold">{r.title}</h4>
                                                            <p className="text-xs text-slate-400">{r.date} - {r.team}</p>
                                                        </div>
                                                        <button onClick={() => deleteDoc('reports', r.id)} className="text-xs font-black text-red-500 border border-red-500 px-3 py-1 rounded hover:bg-red-500 hover:text-white transition">
                                                            å‰Šé™¤
                                                        </button>
                                                    </div>
                                                ))}
                                                {reports.length === 0 && <p className="text-sm text-slate-500">æŠ•ç¨¿ã•ã‚ŒãŸãƒ¬ãƒãƒ¼ãƒˆã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>}
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {adminTab === 'revenue' && <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div className="glass-panel p-8 rounded-[2rem] border-t-4 border-orange-600"><p className="text-xs font-black text-slate-500 mb-2">ç·æ”¯æ´é¡</p><p className="text-4xl font-black italic">Â¥{stats.totalPayment.toLocaleString()}</p></div>
                                    <div className="glass-panel p-8 rounded-[2rem]"><p className="text-xs font-black text-slate-500 mb-2">æ‰‹æ•°æ–™(10%)</p><p className="text-4xl font-black italic text-orange-500">Â¥{(stats.stripeFee + stats.adminFee).toLocaleString()}</p></div>
                                    <div className="glass-panel p-8 rounded-[2rem]"><p className="text-xs font-black text-slate-500 mb-2">é€æ–™ãƒ—ãƒ¼ãƒ«</p><p className="text-4xl font-black italic text-white">Â¥{stats.shipping.toLocaleString()}</p></div>
                                    <div className="glass-panel p-8 rounded-[2rem] col-span-1 md:col-span-3"><h3 className="text-sm font-black text-slate-500 mb-4">è©³ç´°å†…è¨³</h3><div className="grid grid-cols-2 gap-8"><div><p className="text-xs text-slate-500">Stripeæ‰‹æ•°æ–™(3.6%)</p><p className="text-xl font-bold">Â¥{stats.stripeFee.toLocaleString()}</p></div><div><p className="text-xs text-slate-500">äº‹å‹™æ‰‹æ•°æ–™(6.4%)</p><p className="text-xl font-bold">Â¥{stats.adminFee.toLocaleString()}</p></div></div></div>
                                </div>}
                            </div>
                        ) : view === 'home' ? (
                            <>
                                {/* â˜…â˜…â˜… ä¿®æ­£: ãƒ’ãƒ¼ãƒ­ãƒ¼ã¨ãƒªã‚¹ãƒˆã®åˆ†é›¢è¡¨ç¤º â˜…â˜…â˜… */}
                                {/* Top: ãƒ’ãƒ¼ãƒ­ãƒ¼ãƒ“ã‚¸ãƒ§ãƒ³ + æ”¯æ´å‹Ÿé›†ä¸€è¦§ */}
                                {activeTab === 'top' && (
                                    <>
                                        <section className="pt-24 pb-12 md:pt-32 md:pb-24 px-4 md:px-8 text-center fade-in">
                                            <h1 className="text-5xl md:text-[9rem] font-black italic tracking-tighter uppercase leading-[0.9] text-white">
                                                Support Your<br/><span className="text-orange-600">Dream Team.</span>
                                            </h1>
                                            <p className="text-lg md:text-3xl font-black text-slate-300 mt-6 md:mt-8 tracking-widest">
                                                ãã®ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯ãŒã€æœªæ¥ã®ã‚¢ã‚¹ãƒªãƒ¼ãƒˆã®åŠ›ã«ãªã‚‹ã€‚
                                            </p>
                                            <div className="max-w-md mx-auto mt-8 md:hidden">
                                                <input 
                                                    type="text" 
                                                    placeholder="ãƒãƒ¼ãƒ åã‚„å•†å“ã§æ¤œç´¢..." 
                                                    value={searchQuery}
                                                    onChange={(e) => setSearchQuery(e.target.value)}
                                                    className="w-full bg-white/10 border border-white/10 rounded-full py-3 px-6 text-sm font-bold text-white focus:border-orange-500 outline-none transition"
                                                />
                                            </div>
                                            <div className="w-16 h-1 md:w-24 md:h-2 bg-orange-600 mx-auto mt-12 md:mt-16 rounded-full"></div>
                                        </section>

                                        {/* List (Common Component) */}
                                        <div className="max-w-7xl mx-auto px-2 md:px-8 grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-8 pb-32">
                                            {filteredCampaigns.map(c => {
                                                const target = calcTarget(c.price);
                                                const progress = Math.min((c.current / target) * 100, 100);
                                                const isGoal = c.current >= target;

                                                return (
                                                    <div key={c.id} className="campaign-card glass-panel rounded-[1.5rem] md:rounded-[2.5rem] p-2 border border-white/5 relative cursor-pointer" onClick={()=>{setSelectedCampaign(c); setView('detail'); setSupportStep(1); setCustomAmountInput(""); window.scrollTo(0,0);}}>
                                                        {isGoal && <div className="absolute inset-0 z-20 flex items-center justify-center bg-black/40 rounded-[2.5rem]"><div className="goal-stamp border-8 border-orange-500 text-orange-500 text-6xl font-black p-4 rounded-xl rotate-[-15deg]">GOAL!!</div></div>}
                                                        <div className="aspect-square bg-white rounded-[1rem] md:rounded-[2rem] p-4 md:p-8 flex items-center justify-center m-1 md:m-2"><img src={c.image} className="max-h-full"/></div>
                                                        <div className="p-3 md:p-8">
                                                            <span className="bg-white text-black px-2 py-1 md:px-4 md:py-1 rounded-full text-[10px] md:text-sm font-black">{c.team}</span>
                                                            <h3 className="text-sm md:text-xl font-black italic text-white mt-2 md:mt-4 mb-2">{c.name}</h3>
                                                            <div className="flex items-center gap-2 mb-2 text-[10px] md:text-xs font-bold text-slate-400"><span className="text-orange-500">ğŸ‘¤</span> {c.supporters || 0}äººãŒæ”¯æ´ä¸­</div>
                                                            <div className="flex justify-between items-end"><div><p className="text-[8px] md:text-[10px] text-slate-500">ç¾åœ¨</p><span className="text-sm md:text-2xl font-black">Â¥{c.current.toLocaleString()}</span></div><div className="text-right"><p className="text-[8px] md:text-[10px] text-slate-500">ç›®æ¨™</p><span className="text-[10px] md:text-xs font-black">/ Â¥{target.toLocaleString()}</span></div></div>
                                                        </div>
                                                    </div>
                                                );
                                            })}
                                        </div>
                                    </>
                                )}

                                {/* Campaigns: æ”¯æ´å‹Ÿé›†ä¸€è¦§ã®ã¿ (ãƒ’ãƒ¼ãƒ­ãƒ¼ãªã—) */}
                                {activeTab === 'campaigns' && (
                                    <div className="max-w-7xl mx-auto px-2 md:px-8 grid grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-8 py-32 fade-in">
                                        {filteredCampaigns.map(c => {
                                            const target = calcTarget(c.price);
                                            const progress = Math.min((c.current / target) * 100, 100);
                                            const isGoal = c.current >= target;

                                            return (
                                                <div key={c.id} className="campaign-card glass-panel rounded-[1.5rem] md:rounded-[2.5rem] p-2 border border-white/5 relative cursor-pointer" onClick={()=>{setSelectedCampaign(c); setView('detail'); setSupportStep(1); setCustomAmountInput(""); window.scrollTo(0,0);}}>
                                                    {isGoal && <div className="absolute inset-0 z-20 flex items-center justify-center bg-black/40 rounded-[2.5rem]"><div className="goal-stamp border-8 border-orange-500 text-orange-500 text-6xl font-black p-4 rounded-xl rotate-[-15deg]">GOAL!!</div></div>}
                                                    <div className="aspect-square bg-white rounded-[1rem] md:rounded-[2rem] p-4 md:p-8 flex items-center justify-center m-1 md:m-2"><img src={c.image} className="max-h-full"/></div>
                                                    <div className="p-3 md:p-8">
                                                        <span className="bg-white text-black px-2 py-1 md:px-4 md:py-1 rounded-full text-[10px] md:text-sm font-black">{c.team}</span>
                                                        <h3 className="text-sm md:text-xl font-black italic text-white mt-2 md:mt-4 mb-2">{c.name}</h3>
                                                        <div className="flex items-center gap-2 mb-2 text-[10px] md:text-xs font-bold text-slate-400"><span className="text-orange-500">ğŸ‘¤</span> {c.supporters || 0}äººãŒæ”¯æ´ä¸­</div>
                                                        <div className="flex justify-between items-end"><div><p className="text-[8px] md:text-[10px] text-slate-500">ç¾åœ¨</p><span className="text-sm md:text-2xl font-black">Â¥{c.current.toLocaleString()}</span></div><div className="text-right"><p className="text-[8px] md:text-[10px] text-slate-500">ç›®æ¨™</p><span className="text-[10px] md:text-xs font-black">/ Â¥{target.toLocaleString()}</span></div></div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                )}

                                {activeTab === 'about' && (
                                    <div className="max-w-6xl mx-auto py-16 md:py-24 px-4 md:px-8 fade-in">
                                        <div className="text-center mb-20">
                                            <h2 className="text-5xl md:text-7xl font-black italic uppercase tracking-tighter text-transparent bg-clip-text bg-gradient-to-r from-white to-slate-500 mb-6">
                                                Why <span className="text-orange-500">MySUPPORTER?</span>
                                            </h2>
                                            <p className="text-lg md:text-2xl font-bold text-slate-300 tracking-wider">
                                                é€æ˜æ€§ã®é«˜ã„ã€Œç‰©å“æ”¯æ´ã€ã§ã€<br className="md:hidden" />ã‚¹ãƒãƒ¼ãƒ„ã®ç†±ç‹‚ã‚’æ”¯ãˆã‚‹ã€‚
                                            </p>
                                        </div>
                                        <div className="glass-panel p-8 md:p-16 rounded-[3rem] mb-16 border-l-4 border-orange-500 relative overflow-hidden">
                                            <div className="absolute -right-20 -top-20 w-64 h-64 bg-orange-600/20 blur-[100px] rounded-full pointer-events-none"></div>
                                            <h3 className="text-2xl font-black italic mb-8 text-white relative z-10">ã€Œä½•ã«ä½¿ã‚ã‚ŒãŸã‹åˆ†ã‹ã‚‰ãªã„ã€ã‚’ãªãã™ã€‚</h3>
                                            <div className="space-y-6 text-slate-300 font-medium leading-relaxed relative z-10 text-justify md:text-left text-sm md:text-base">
                                                <p>ã“ã‚Œã¾ã§ã®ã‚¹ãƒãƒ¼ãƒ„æ”¯æ´ï¼ˆå¯„ä»˜ï¼‰ã«ã¯ã€ã€Œä¸é€æ˜ã•ã€ã¨ã„ã†èª²é¡ŒãŒã‚ã‚Šã¾ã—ãŸã€‚<br className="hidden md:inline"/>é›†ã¾ã£ãŸè³‡é‡‘ãŒé å¾è²»ã«ä½¿ã‚ã‚ŒãŸã®ã‹ã€é‹å–¶è²»ã«æ¶ˆãˆãŸã®ã‹ã€æ”¯æ´è€…ã«ã¯è¦‹ãˆã«ãã„ç¾çŠ¶ãŒã‚ã‚Šã¾ã™ã€‚</p>
                                                <p>MySUPPORTERã¯ã€ç¾é‡‘ã®ã‚„ã‚Šå–ã‚Šã‚’æ’é™¤ã—ã€<strong className="text-orange-400">ã€Œãƒãƒ¼ãƒ ãŒæŒ‡å®šã—ãŸç‰©å“ãã®ã‚‚ã®ã€</strong>ã‚’å±Šã‘ã‚‹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚<br className="hidden md:inline"/>ã‚ãªãŸã®æ”¯æ´ã¯ã€ç¢ºå®Ÿã«ãƒœãƒ¼ãƒ«ã«ãªã‚Šã€ãƒ¦ãƒ‹ãƒ•ã‚©ãƒ¼ãƒ ã«ãªã‚Šã€é¸æ‰‹ã®åŠ›ã«ãªã‚Šã¾ã™ã€‚</p>
                                            </div>
                                        </div>
                                        <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                            <div className="glass-panel p-8 rounded-[2.5rem] hover:bg-white/5 transition duration-300 group">
                                                <div className="w-16 h-16 bg-orange-500/10 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-orange-500/20 transition">
                                                    <svg className="w-8 h-8 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                                                </div>
                                                <h4 className="text-xl font-black italic text-white mb-3">100%ã®é€æ˜æ€§</h4>
                                                <p className="text-sm text-slate-400 leading-relaxed">æ”¯æ´é‡‘ã¯ã€ãƒãƒ¼ãƒ ãŒãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ãŸã€Œå•†å“ã®è³¼å…¥ã€ã®ã¿ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ä½¿é€”ä¸æ˜é‡‘ã¯ç™ºç”Ÿã—ã¾ã›ã‚“ã€‚</p>
                                            </div>
                                            <div className="glass-panel p-8 rounded-[2.5rem] hover:bg-white/5 transition duration-300 group">
                                                <div className="w-16 h-16 bg-orange-500/10 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-orange-500/20 transition">
                                                    <svg className="w-8 h-8 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" /></svg>
                                                </div>
                                                <h4 className="text-xl font-black italic text-white mb-3">ãƒ¢ãƒã§å±Šãä¾¡å€¤</h4>
                                                <p className="text-sm text-slate-400 leading-relaxed">æ–°å“ã®ç”¨å…·ãŒå±Šãå–œã³ã¯ã€ç¾é‡‘ã®æŒ¯è¾¼ã‚ˆã‚Šã‚‚ç›´æ¥çš„ã«ãƒãƒ¼ãƒ ã®å£«æ°—ã‚’é«˜ã‚ã€ç·´ç¿’ã®è³ªã‚’å‘ä¸Šã•ã›ã¾ã™ã€‚</p>
                                            </div>
                                            <div className="glass-panel p-8 rounded-[2.5rem] hover:bg-white/5 transition duration-300 group">
                                                <div className="w-16 h-16 bg-orange-500/10 rounded-2xl flex items-center justify-center mb-6 group-hover:bg-orange-500/20 transition">
                                                    <svg className="w-8 h-8 text-orange-500" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z" /></svg>
                                                </div>
                                                <h4 className="text-xl font-black italic text-white mb-3">æ´»å‹•ãŒè¦‹ãˆã‚‹</h4>
                                                <p className="text-sm text-slate-400 leading-relaxed">ç‰©å“ã‚’å—ã‘å–ã£ãŸãƒãƒ¼ãƒ ã‹ã‚‰ã€å†™çœŸä»˜ãã®æ´»å‹•å ±å‘ŠãŒå±Šãã¾ã™ã€‚ã‚ãªãŸã®æ”¯æ´ãŒã©ã†å½¹ç«‹ã£ãŸã‹å®Ÿæ„Ÿã§ãã¾ã™ã€‚</p>
                                            </div>
                                        </div>
                                    </div>
                                )}

                                {activeTab === 'howitworks' && (
                                    <div className="max-w-6xl mx-auto py-12 md:py-24 px-4 md:px-8 fade-in space-y-24">
                                        {/* ãƒãƒ¼ãƒ å‘ã‘ */}
                                        <div>
                                            <div className="text-center mb-12">
                                                <span className="text-orange-500 font-black tracking-widest text-xs uppercase mb-2 block">For Teams</span>
                                                <h2 className="text-3xl md:text-4xl font-black italic uppercase tracking-tighter text-white">ãƒãƒ¼ãƒ ã®æ–¹ã¸</h2>
                                                <p className="text-slate-500 font-bold mt-4">å¿…è¦ãªç”¨å…·ã‚’ãƒªã‚¯ã‚¨ã‚¹ãƒˆã—ã¦ã€æ”¯æ´ã‚’å‹Ÿã‚Šã¾ã—ã‚‡ã†</p>
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                                {[
                                                    {step: "01", title: "å•†å“é¸å®š", text: "Amazonã‚„æ¥½å¤©ã§ãƒãƒ¼ãƒ ã«å¿…è¦ãªç”¨å…·ã‚’é¸ã³ã€å•†å“URLã‚’ã‚³ãƒ”ãƒ¼ã—ã¾ã™ã€‚"},
                                                    {step: "02", title: "æ²è¼‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆ", text: "å°‚ç”¨ãƒ•ã‚©ãƒ¼ãƒ ã‹ã‚‰ãƒãƒ¼ãƒ æƒ…å ±ã¨å•†å“URLã‚’é€ä¿¡ã—ã€æ²è¼‰ã‚’ç”³è«‹ã—ã¾ã™ã€‚"},
                                                    {step: "03", title: "å—ã‘å–ã‚Š", text: "ç›®æ¨™é‡‘é¡ã«é”ã™ã‚‹ã¨ã€äº‹å‹™å±€ãŒä»£ç†è³¼å…¥ã—ã€ãƒãƒ¼ãƒ ã«å•†å“ãŒå±Šãã¾ã™ã€‚"}
                                                ].map((s, i) => (
                                                    <div key={i} className="glass-panel p-8 rounded-[2rem] relative overflow-hidden group hover:border-orange-500/50 transition">
                                                        <div className="text-7xl font-black italic text-white/5 absolute -top-2 -right-2">{s.step}</div>
                                                        <h3 className="text-xl font-black italic mb-3 text-orange-500">{s.title}</h3>
                                                        <p className="text-sm text-slate-300 font-bold leading-relaxed">{s.text}</p>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>

                                        {/* ã‚µãƒãƒ¼ã‚¿ãƒ¼å‘ã‘ */}
                                        <div>
                                            <div className="text-center mb-12">
                                                <span className="text-orange-500 font-black tracking-widest text-xs uppercase mb-2 block">For Supporters</span>
                                                <h2 className="text-3xl md:text-4xl font-black italic uppercase tracking-tighter text-white">ã‚µãƒãƒ¼ã‚¿ãƒ¼ã®æ–¹ã¸</h2>
                                                <p className="text-slate-500 font-bold mt-4">æœªæ¥ã®ã‚¢ã‚¹ãƒªãƒ¼ãƒˆã‚’ã€ã‚ãªãŸã®æ”¯æ´ã§æ”¯ãˆã¾ã—ã‚‡ã†</p>
                                            </div>
                                            <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                                                {[
                                                    {step: "01", title: "ãƒãƒ¼ãƒ ã‚’æ¢ã™", text: "å¿œæ´ã—ãŸã„ãƒãƒ¼ãƒ ã‚„ã€å…±æ„Ÿã§ãã‚‹ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä¸€è¦§ã‹ã‚‰æ¢ã—ã¾ã™ã€‚"},
                                                    {step: "02", title: "æ”¯æ´ã™ã‚‹", text: "ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰ã§æ±ºæ¸ˆã€‚å°‘é¡ã‹ã‚‰ã§ã‚‚ã€å…¨é¡æ”¯æ´ã§ã‚‚å¯èƒ½ã§ã™ã€‚"},
                                                    {step: "03", title: "æ´»å‹•å ±å‘Š", text: "æ”¯æ´ã—ãŸãƒãƒ¼ãƒ ã‹ã‚‰ã€æ„Ÿè¬ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚„æ´»å‹•å ±å‘ŠãŒå±Šãã¾ã™ã€‚"}
                                                ].map((s, i) => (
                                                    <div key={i} className="glass-panel p-8 rounded-[2rem] relative overflow-hidden group hover:border-orange-500/50 transition">
                                                        <div className="text-7xl font-black italic text-white/5 absolute -top-2 -right-2">{s.step}</div>
                                                        <h3 className="text-xl font-black italic mb-3 text-orange-500">{s.title}</h3>
                                                        <p className="text-sm text-slate-300 font-bold leading-relaxed">{s.text}</p>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    </div>
                                )}
                                {activeTab === 'thanks' && (
                                    <div className="max-w-4xl mx-auto py-20 px-8 fade-in">
                                        <h2 className="text-center text-3xl font-black italic uppercase mb-12 tracking-tighter text-orange-500">æ´»å‹•å ±å‘Š</h2>
                                        <div className="space-y-8">{reports.map(r=><div key={r.id} className="glass-panel p-8 rounded-[2rem] flex gap-8"><img src={r.image} className="w-32 h-32 rounded-xl object-cover"/><div><h3 className="text-xl font-black">{r.title}</h3><p className="text-sm text-slate-400 mt-2">{r.content}</p></div></div>)}</div>
                                    </div>
                                )}
                            </>
                        ) : view === 'apply' ? (
                            <div className="max-w-2xl mx-auto py-12 md:py-24 px-4 md:px-8 fade-in">
                                <h2 className="text-3xl md:text-4xl font-black italic text-center text-orange-500 mb-8 md:mb-16">æ²è¼‰ãƒªã‚¯ã‚¨ã‚¹ãƒˆ</h2>
                                {/* â˜…ä¿®æ­£: å…¥åŠ›é …ç›®è¿½åŠ  */}
                                <div className="glass-panel p-6 md:p-12 rounded-[2rem] md:rounded-[4rem] space-y-6 border-t-[12px] border-orange-600">
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <input className="input-field" placeholder="ãƒãƒ¼ãƒ å" value={applyForm.team} onChange={e=>setApplyForm({...applyForm, team: e.target.value})} />
                                        <input className="input-field" placeholder="Email (é€£çµ¡ç”¨)" value={applyForm.email} onChange={e=>setApplyForm({...applyForm, email: e.target.value})} />
                                    </div>
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                                        <input className="input-field" placeholder="ãŠåå‰ (æ‹…å½“è€…)" value={applyForm.contactName} onChange={e=>setApplyForm({...applyForm, contactName: e.target.value})} />
                                        <input className="input-field" placeholder="é›»è©±ç•ªå·" value={applyForm.phone} onChange={e=>setApplyForm({...applyForm, phone: e.target.value})} />
                                    </div>
                                    <input className="input-field" placeholder="ç™ºé€å…ˆä½æ‰€ (ã€’å«ã‚€)" value={applyForm.address} onChange={e=>setApplyForm({...applyForm, address: e.target.value})} />
                                    
                                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4"><input className="input-field" placeholder="ãƒãƒ¼ãƒ URL" value={applyForm.teamUrl} onChange={e=>setApplyForm({...applyForm, teamUrl: e.target.value})} /><input className="input-field" placeholder="SNS URL" value={applyForm.snsUrl} onChange={e=>setApplyForm({...applyForm, snsUrl: e.target.value})} /></div>
                                    <input className="input-field" placeholder="å•†å“URL (Amazon/æ¥½å¤©)" value={applyForm.itemUrl} onChange={e=>setApplyForm({...applyForm, itemUrl: e.target.value})} />
                                    <textarea className="input-field h-32" placeholder="ç†ç”±" value={applyForm.description} onChange={e=>setApplyForm({...applyForm, description: e.target.value})}></textarea>
                                    
                                    <div className="bg-white/5 p-4 rounded-xl flex gap-4 items-start">
                                        <input type="checkbox" className="mt-1" checked={applyAgreed} onChange={()=>setApplyAgreed(!applyAgreed)} />
                                        <p className="text-xs text-slate-400">åˆ©ç”¨è¦ç´„ãŠã‚ˆã³è™šå½ç”³è«‹ã§ãªã„ã“ã¨ã«åŒæ„ã—ã¾ã™ã€‚</p>
                                    </div>
                                    <p className="text-[10px] text-center text-slate-500">â€»ç™ºé€å…ˆæƒ…å ±ã¯DBã«ã¯ä¿å­˜ã•ã‚Œãšã€ç®¡ç†è€…ã¸ã®ãƒ¡ãƒ¼ãƒ«ã§ã®ã¿é€ä¿¡ã•ã‚Œã¾ã™ã€‚</p>
                                    <button onClick={submitRequest} className="w-full py-6 bg-orange-600 rounded-3xl font-black text-xl shadow-xl hover:bg-orange-500 disabled:opacity-50" disabled={!applyAgreed}>é€ä¿¡</button>
                                </div>
                            </div>
                        ) : null}
                    </main>

                    <footer className="border-t border-white/5 py-16 px-8 bg-black text-center md:text-left">
                        <div className="max-w-7xl mx-auto flex flex-col md:flex-row justify-between items-center gap-8">
                            <div><span className="font-black italic text-xl">MySupporter</span><p onClick={()=>{if(!isAdminMode)setShowLogin(true)}} className={`text-[10px] font-bold text-slate-800 tracking-widest mt-2 ${!isAdminMode && "cursor-pointer hover:text-slate-600 secret-trigger"}`}>Â© 2026 MySupporter. All Rights Reserved.</p></div>
                            <div className="flex flex-wrap justify-center gap-6">
                                <button onClick={()=>setModal({open:true, title:'åˆ©ç”¨è¦ç´„', content:docContent.terms})} className="text-[10px] font-black text-slate-500 hover:text-orange-500">åˆ©ç”¨è¦ç´„</button>
                                <button onClick={()=>setModal({open:true, title:'ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼', content:docContent.privacy})} className="text-[10px] font-black text-slate-500 hover:text-orange-500">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</button>
                                <button onClick={()=>setModal({open:true, title:'ç‰¹å•†æ³•', content:docContent.tokusho})} className="text-[10px] font-black text-slate-500 hover:text-orange-500">ç‰¹å•†æ³•è¡¨è¨˜</button>
                                <a href="https://ymozfleet-creator.github.io/Ark/" target="_blank" className="text-[10px] font-black text-slate-500 hover:text-orange-500">é‹å–¶ä¼šç¤¾</a>
                            </div>
                        </div>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
