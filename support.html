<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MySupporter | チーム支援プラットフォーム</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #0a0a0c; color: #ffffff; margin: 0; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .glass-panel {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 2rem;
        }
        .text-accent { color: #f97316; }
        .btn-primary {
            background: linear-gradient(135deg, #f97316, #ea580c);
            transition: all 0.3s ease;
        }
        .btn-primary:hover:not(:disabled) { transform: scale(1.02); box-shadow: 0 0 20px rgba(249, 115, 22, 0.4); }
        .btn-primary:disabled { opacity: 0.3; cursor: not-allowed; }
        .progress-accent {
            background: linear-gradient(90deg, #f97316, #fb923c);
            box-shadow: 0 0 10px rgba(249, 115, 22, 0.5);
        }
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const App = () => {
            const [view, setView] = useState('list');
            const [activeTab, setActiveTab] = useState('campaigns'); 
            const [selected, setSelected] = useState(null);
            const [amount, setAmount] = useState(1000);
            const [customAmount, setCustomAmount] = useState("");

            // 金額計算：(Amazon価格 + 送料500円) * 1.1
            const calcTarget = (p) => Math.floor((p + 500) * 1.1);

            const campaigns = [
                { 
                    id: 1, team: "東京サッカーアカデミー", name: "公式試合球 5号 10個セット", 
                    asin: "B00X9S5Y6Y", amazonPrice: 58000, current: 34000, supporters: 12
                },
                { 
                    id: 2, team: "品川ライオンズ", name: "トレーニング用ミニハードル", 
                    asin: "B01DLYG66M", amazonPrice: 8500, current: 2000, supporters: 3
                }
            ];

            const openDetail = (item) => {
                setSelected(item);
                setView('detail');
                setAmount(1000);
                setCustomAmount("");
                window.scrollTo(0, 0);
            };

            const handleCustomAmount = (e) => {
                const val = e.target.value;
                setCustomAmount(val);
                if (val >= 500) setAmount(Number(val));
            };

            const targetWithFee = selected ? calcTarget(selected.amazonPrice) : 0;
            const remaining = selected ? targetWithFee - selected.current : 0;

            return (
                <div className="min-h-screen">
                    {/* Header */}
                    <nav className="h-20 border-b border-white/10 flex items-center justify-between px-8 sticky top-0 bg-[#0a0a0c]/80 backdrop-blur-md z-50">
                        <div className="flex items-center gap-2 cursor-pointer" onClick={() => setView('list')}>
                            <div className="bg-orange-500 w-8 h-8 rounded-lg flex items-center justify-center italic font-black text-white shadow-lg">S</div>
                            <span className="font-black text-2xl tracking-tighter uppercase italic text-white leading-none">MySupporter</span>
                        </div>
                        <div className="hidden md:flex items-center gap-10">
                            <button onClick={() => {setView('list'); setActiveTab('campaigns');}} className={`text-xs font-black uppercase tracking-widest transition-all ${activeTab === 'campaigns' && view === 'list' ? 'text-accent border-b-2 border-orange-500 pb-1' : 'text-slate-400'}`}>支援募集</button>
                            <button onClick={() => {setView('list'); setActiveTab('thanks');}} className={`text-xs font-black uppercase tracking-widest transition-all ${activeTab === 'thanks' && view === 'list' ? 'text-accent border-b-2 border-orange-500 pb-1' : 'text-slate-400'}`}>活動報告</button>
                        </div>
                        <div className="text-[10px] font-black bg-white/10 px-4 py-2 rounded-full uppercase tracking-widest text-slate-300">DEMO USER</div>
                    </nav>

                    <main className="max-w-5xl mx-auto p-8">
                        {view === 'list' ? (
                            <div className="fade-in">
                                <header className="mb-16">
                                    <h1 className="text-6xl font-black italic tracking-tighter mb-4 uppercase leading-none">Support your Team</h1>
                                    <p className="text-slate-400 font-bold text-xs uppercase tracking-widest">MyCOACH-MyTEAM 連携プラットフォーム</p>
                                </header>
                                {activeTab === 'campaigns' ? (
                                    <div className="grid gap-8">
                                        {campaigns.map(c => {
                                            const total = calcTarget(c.amazonPrice);
                                            const progress = (c.current / total) * 100;
                                            return (
                                                <div key={c.id} className="glass-panel p-8 flex flex-col md:flex-row gap-10 items-center hover:bg-white/[0.05] transition-all cursor-pointer group shadow-2xl" onClick={() => openDetail(c)}>
                                                    <div className="w-52 h-52 bg-white rounded-[2.5rem] p-8 flex items-center justify-center shrink-0 shadow-2xl overflow-hidden">
                                                        <img src={`https://images-na.ssl-images-amazon.com/images/P/${c.asin}.01.LZZZZZZZ.jpg`} className="max-h-full group-hover:scale-110 transition-transform duration-500" />
                                                    </div>
                                                    <div className="flex-1 w-full space-y-6">
                                                        <div className="space-y-1">
                                                            <span className="text-sm font-black text-accent uppercase tracking-[0.3em]">{c.team}</span>
                                                            <h3 className="text-3xl font-black italic uppercase leading-tight tracking-tighter">{c.name}</h3>
                                                        </div>
                                                        <div className="space-y-3">
                                                            <div className="flex justify-between text-[10px] font-black uppercase tracking-widest text-slate-500">
                                                                <span>Progress: {progress.toFixed(0)}%</span>
                                                                <span className="text-white italic text-xs">目標: ¥{total.toLocaleString()}</span>
                                                            </div>
                                                            <div className="w-full h-1.5 bg-white/10 rounded-full overflow-hidden">
                                                                <div className="h-full progress-accent" style={{width: `${progress}%`}}></div>
                                                            </div>
                                                        </div>
                                                        <div className="flex justify-between items-center pt-2">
                                                            <span className="text-[10px] font-black text-slate-500 uppercase">{c.supporters} Supporters</span>
                                                            <button className="px-10 py-4 btn-primary rounded-xl font-black text-sm uppercase italic tracking-widest shadow-lg">支援に参加</button>
                                                        </div>
                                                    </div>
                                                </div>
                                            );
                                        })}
                                    </div>
                                ) : (
                                    <div className="max-w-2xl mx-auto py-10 space-y-8 fade-in">
                                        <div className="glass-panel p-10 border-l-4 border-l-orange-500">
                                            <p className="text-2xl font-bold italic">「支援者様のおかげで、最高の練習ができています！」</p>
                                        </div>
                                    </div>
                                )}
                            </div>
                        ) : (
                            /* --- 詳細・自由入力決済画面 --- */
                            <div className="max-w-3xl mx-auto fade-in py-10">
                                <button onClick={() => setView('list')} className="text-slate-500 font-black flex items-center gap-2 hover:text-white transition uppercase text-xs tracking-widest mb-10 group">
                                    <span className="group-hover:-translate-x-1 transition-transform">←</span> Back to List
                                </button>
                                
                                <div className="glass-panel p-10 space-y-12 shadow-2xl">
                                    <div className="flex flex-col md:flex-row gap-10 items-center">
                                        <div className="w-40 h-40 bg-white rounded-3xl p-6 shrink-0 flex items-center justify-center">
                                            <img src={`https://images-na.ssl-images-amazon.com/images/P/${selected.asin}.01.LZZZZZZZ.jpg`} className="max-h-full" />
                                        </div>
                                        <div className="space-y-2 text-center md:text-left">
                                            <p className="text-accent font-black text-lg uppercase tracking-[0.3em]">{selected.team}</p>
                                            <h2 className="text-3xl font-black italic uppercase leading-tight tracking-tighter">{selected.name}</h2>
                                        </div>
                                    </div>

                                    <div className="space-y-8">
                                        <div className="grid grid-cols-2 md:grid-cols-4 gap-3">
                                            {[1000, 3000, 5000].map(val => (
                                                <button key={val} onClick={() => {setAmount(val); setCustomAmount("");}} className={`py-4 rounded-xl font-black text-sm border transition-all ${amount === val && customAmount === "" ? 'bg-orange-500 border-orange-500 text-white shadow-lg' : 'bg-white/5 border-white/10 text-slate-500 hover:text-white'}`}>¥{val.toLocaleString()}</button>
                                            ))}
                                            <button onClick={() => {setAmount(remaining); setCustomAmount("");}} className={`py-4 rounded-xl font-black text-sm border transition-all ${amount === remaining ? 'bg-orange-500 border-orange-500 text-white shadow-lg' : 'bg-white/5 border-white/10 text-slate-500 hover:text-white'}`}>全額支援</button>
                                        </div>

                                        <div className="relative">
                                            <label className="text-[10px] font-black text-slate-500 uppercase tracking-widest block mb-3 ml-2">支援金額を自由に指定 (500円以上)</label>
                                            <div className="flex items-center gap-4 bg-white/5 border border-white/10 rounded-2xl p-2 px-6 focus-within:border-orange-500 transition-all">
                                                <span className="text-2xl font-black text-slate-500">¥</span>
                                                <input 
                                                    type="number" 
                                                    placeholder="500" 
                                                    value={customAmount}
                                                    onChange={handleCustomAmount}
                                                    className="bg-transparent w-full py-4 text-2xl font-black outline-none text-white placeholder:text-slate-800"
                                                />
                                            </div>
                                            {customAmount !== "" && customAmount < 500 && <p className="text-[10px] text-red-500 font-bold mt-2 ml-2 uppercase">※ 500円以上の金額を入力してください</p>}
                                        </div>
                                    </div>

                                    <div className="bg-white/5 p-10 rounded-[2.5rem] border border-white/10">
                                        <div className="flex justify-between items-end mb-10 italic">
                                            <div className="space-y-1">
                                                <span className="text-[10px] font-black uppercase text-slate-500 tracking-widest block">お支払い金額</span>
                                                <span className="text-[10px] text-slate-600 uppercase font-bold tracking-tighter italic block">Supported Amount</span>
                                            </div>
                                            <span className="text-7xl font-black text-accent tracking-tighter animate-pulse">¥{amount.toLocaleString()}</span>
                                        </div>
                                        <button 
                                            disabled={amount < 500}
                                            onClick={() => { alert(`¥${amount.toLocaleString()} の支援ありがとうございます！決済画面へ。`); setView('list'); }}
                                            className="w-full py-7 btn-primary rounded-2xl font-black text-2xl uppercase italic shadow-2xl tracking-widest"
                                        >Pay with Stripe</button>
                                    </div>
                                </div>
                            </div>
                        )}
                    </main>

                    <footer className="py-24 text-center opacity-20">
                        <div className="font-black italic text-3xl uppercase tracking-tighter mb-4 text-white">MySupporter</div>
                        <p className="text-[10px] font-black uppercase tracking-[0.6em] text-slate-700 italic">© 2026 Powered by MyCOACH-MyTEAM</p>
                    </footer>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>